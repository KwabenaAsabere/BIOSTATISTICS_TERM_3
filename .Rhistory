x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
z_score <- function(x){
x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
}
df <- tibble(
a = rnorm(5),
b =rnorm(5),
c = rnorm(5),
d = rnorm(5)
)
z_score <- function(x){
x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
}
df %>%
mutate(across(a:d, z_score))
df
df
df %>%
mutate(across(a:d, z_score))
df %>% summarise(pick(a:d),mean,na.rm = TRUE)
df %>% summarise(pick(a:d,mean,na.rm = TRUE)
df %>% summarise(pick(a:d,mean,na.rm = TRUE))
df %>% summarise(pick(a:d,mean,na.rm = TRUE))
df %>% summarise(pick(a:d),mean,na.rm = TRUE))
df %>% summarise(pick(a:d),mean,na.rm = TRUE)
df %>% summarise(across(a:d),mean,na.rm = TRUE)
df %>% summarise(across(a:d,(mean,na.rm = TRUE))
df %>% summarise(across(a:d(mean,na.rm = TRUE))
df %>% summarise(across(a:d(mean,na.rm = TRUE))
df %>% summarise(across(a:d(mean,na.rm = TRUE)))
df %>% summarise(across(a:d,(mean,na.rm = TRUE)))
df %>% summarise(across(a:d,mean,na.rm = TRUE)))
df %>% summarise(across(a:d,mean,na.rm = TRUE))
df %>% summarise(pick(a:d,mean,na.rm = TRUE))
df %>% mutate(cols = pick(a:d))
z_score(-0.172)
z
Z_score <- function(df,x){
x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
}
df %>%
mutate(across(a:d, Z_score))
Z_score(df,a)
x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
z_score <- function(x){
x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
}
df %>%
mutate(across(a:d, z_score))
df %>% summarise(across(a:d,sd,na.rm = TRUE))
df
df %>%
mutate(across(a:d, z_score))
df %>% summarise(across(a:d,list(mean = mean,sd = sd),na.rm = TRUE))
df
df %>% summarise(across(a:d,list(mean = mean,sd = sd),na.rm = TRUE))
(a - mean(a)/sd(a))
(df$a - mean(df$a)/sd(df$a))
z_score <- function(x){
x-mean(x,na.rm = TRUE)/sd(x,na.rm = TRUE)
}
df %>%
mutate(across(a:d, z_score))
z_score <- function(x){
(x-mean(x,na.rm = TRUE))/sd(x,na.rm = TRUE)
}
df %>%
mutate(across(a:d, z_score))
df <- tibble(
a = rnorm(5),
b =rnorm(5),
c = rnorm(5),
d = rnorm(5)
)
z_score <- function(x){
(x-mean(x,na.rm = TRUE))/sd(x,na.rm = TRUE)
}
nepal <- read_csv('nepal_anthro.csv')
group_mean <- function(df,group_var,mean_var){
df %>%
group_by({{group_var}}) %>%
mean({{mean_var}})
}
nepal %>% group_mean(sex,weight)
group_mean <- function(df,group_var,mean_var){
df %>%
group_by({{group_var}}) %>%
mean({{mean_var}},na.rm=TRUE)
}
nepal %>% group_mean(sex,weight)
View(nepal)
group_mean <- function(df,group_var,mean_var){
df %>%
group_by({{group_var}}) %>%
mean({{mean_var}},na.rm=TRUE)
}
nepal %>% group_mean(sex,weight)
group_mean <- function(df,group_var,mean_var){
df %>%
group_by({{group_var}}) %>%
summarise(mean({{mean_var}},na.rm=TRUE))
}
nepal %>% group_mean(sex,weight)
nepal %>% group_mean(sex,c(weight,height,armcirc))
nepal %>% group_mean(sex,armcirc)
count_prop <- function(df,var,sort=FALSE){
df %>%
count({{var}},sort=sort) %>%
mutate(prop = n/sum(n))
}
diamonds %>% count_prop(clarity)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point()+
geom_smooth(method = "lm")+
theme_bw()
}
nepal %>% plot_nepal(height,weight)
nepal %>% plot_nepal(height,armcirc)
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue')+
geom_smooth(method = "lm")+
theme_bw()
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue')+
geom_smooth(method = "lm")+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue')+
geom_smooth(method = "lm",color = "navyblue")+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',aplha = o.3)+
geom_smooth(method = "lm",color = "navyblue")+
theme_bw()
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',aplha = o.3)+
geom_smooth(method = "lm",color = "navyblue")+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',aplha = 0.3)+
geom_smooth(method = "lm",color = "navyblue")+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',aloha = 0.3)+
geom_smooth(method = "lm",color = "navyblue")+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',alpha = 0.3)+
geom_smooth(method = "lm",color = "navyblue")+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',alpha = 0.5)+
geom_smooth(method = "lm",color = "navyblue",se = FALSE)+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',alpha = 0.8)+
geom_smooth(method = "lm",color = "navyblue",se = FALSE)+
theme_bw()
}
nepal %>% plot_nepal(height,armcirc)
nepal %>% plot_nepal(weight,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'red',alpha = 0.8)+
geom_smooth(method = "lm",color = "navyblue",se = FALSE)+
theme_bw()
}
nepal %>% plot_nepal(weight,armcirc)
plot_nepal <- function(df,x,y){
df %>%
ggplot(aes(x={{x}}, y = {{y}}))+
geom_point(color = 'steelblue',alpha = 0.8)+
geom_smooth(method = "lm",color = "red",se = FALSE)+
theme_bw()
}
nepal %>% plot_nepal(weight,armcirc)
library(tidyverse)
df <- tibble(
grp = sample(2,10,replace = TRUE),
a = rnorm(10),
b = rnorm(10),
c = rnorm(10),
d = rnorm(10)
)
df <- tibble(
grp = sample(2,10,replace = TRUE),
a = rnorm(10),
b = rnorm(10),
c = rnorm(10),
d = rnorm(10)
)
View(df)
df %>%
group_by(grp) %>%
summarise(across(everything(),median))
rnorm_na <- function(n,n_na,mean = 0,sd = 1){
sample(c(rnorm(n- n_na,mean = mean, sd = sd), rep(NA,n_na)))
}
df_miss <- tibble(
a = rnorm_na(5,1),
b = rnorm_na(5,1),
c = rnorm_na(5,2),
d = rnorm(5)
)
View(df_miss)
df_miss %>%
summarize(
across(a:d,median),
n = n()
)
df_miss %>%
summarize(
across(a:d,median,na.rm = TRUE),
n = n()
)
df_miss %>%
summarize(
across(a:d, \(x) median(x, na.rm = TRUE)),
n = n()
)
df_miss %>%
summarise(across(a:d,list(
median = \(x) median(x, na.rm = TRUE),
n_miss = \(x) sum(is.na(x)),
n = n()
)))
df_miss %>%
summarise(
across(a:d,list(
median = \(x) median(x, na.rm = TRUE),
n_miss = \(x) sum(is.na(x))
)),
n = n())
df_miss %>%
summarise(
across(a:d,list(
median = \(x) median(x, na.rm = TRUE),
n_miss = \(x) sum(is.na(x))
),
.names = "{.fn}_{.col}"
),
n = n())
df_miss %>%
mutate(
across(a;d,\(x) coalesce(x,0))
df_miss %>%
mutate(
across(a:d,\(x) coalesce(x,0))
)
df_miss %>%
filter(if_any(a;d,is.na))
df_miss %>%
filter(if_any(a:d,is.na))
df_miss %>%
filter(if_all(a:d,is.na))
summarize_means <- function(df,summary_vars = where(is.numeric)){
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE)),
n = n()
)
}
diamonds %>%
group_by(cut) %>%
summarize_means()
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE),
{{summary_vars}}, \(x) sd(x,na.rm =TRUE)),
n = n()
)
summarize_means <- function(df,summary_vars = where(is.numeric)){
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE),
{{summary_vars}}, \(x) sd(x,na.rm =TRUE)),
n = n()
)
}
diamonds %>%
group_by(cut) %>%
summarize_means()
diamonds %>%
group_by(cut) %>%
summarize_means()
summarize_means <- function(df,summary_vars = where(is.numeric)){
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE),
{{summary_vars}}, \(x) sd(x,na.rm =TRUE)),
n = n()
)
}
diamonds %>%
group_by(cut) %>%
summarize_means()
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE),
{{summary_vars}}, \(x) max(x,na.rm =TRUE)),
n = n()
)
summarize_means <- function(df,summary_vars = where(is.numeric)){
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE),
{{summary_vars}}, \(x) max(x,na.rm =TRUE)),
n = n()
)
}
diamonds %>%
group_by(cut) %>%
summarize_means()
summarize_means <- function(df,summary_vars = where(is.numeric)){
df %>%
summarise(
across({{summary_vars}}, \(x) mean(x, na.rm = TRUE)),
n = n()
)
}
diamonds %>%
group_by(cut) %>%
summarize_means()
diamonds %>%
group_by(cut) %>%
summarize_means(c(carat,x:z))
df
source("~/.active-rstudio-document", echo=TRUE)
long <-
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value)
)
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value)
)
long
df
df %>%
pivot_longer(a:d)
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value)
)
long
df %>%
pivot_longer(a:d)
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value)
)
long
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value)
Z-score = function(x){
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
Z-score = function(x){
z_score <- function(x){
(x-mean(x,na.rm = TRUE))/sd(x,na.rm = TRUE)
}
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
Z_score = z_score
)
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
Z_score = z_score(value)
)
long
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
max = max(value),
min = min(value),
IQR = IQR(value)
)
long
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
max = max(value),
min = min(value),
IQR = IQR(value)
Z_score = scale(value)
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
max = max(value),
min = min(value),
IQR = IQR(value),
Z_score = scale(value)
)
long <- df %>%
pivot_longer(a:d) %>%
group_by(name) %>%
summarise(
median = median(value),
mean = mean(value),
sd = sd(value),
max = max(value),
min = min(value),
IQR = IQR(value)
)
long
long %>%
pivot_wider(
names_from = name,
values_from = c(median,mean),
names_vary = 'slowest',
names_glue = "{name}_{.value}"
)
long %>%
pivot_wider(
names_from = name,
values_from = c(median,mean,sd,max,min,IQR),
names_vary = 'slowest',
names_glue = "{name}_{.value}"
)
paths <- list.files("data/gapminder",pattern = "[.]xlsx$",full.names = TRUE)
paths
paths
paths <- list.files("data/gapminder",pattern = "[.]xlsx$",full.names = TRUE)
paths <- list.files("data/BIOSTATS TERM 3",pattern = "[.]xlsx$",full.names = TRUE)
paths <- list.files("data/BIOSTATS TERM 3",pattern = "[.]xlsx$",full.names = TRUE)
paths <- list.files("data/BIOSTATS TERM 3",pattern = "[.]csv$",full.names = TRUE)
paths <- list.files("data/BIOSTATS TERM 3",pattern = "[.]csv$",full.names = TRUE)
paths
paths <- list.files("BIOSTATS TERM 3",pattern = "[.]csv$",full.names = TRUE)
paths <- list.files("data/gapminder",pattern = "[.]csv$",full.names = TRUE)
paths
paths <- list.files("data/gapminder",pattern = "[.]xlsx$",full.names = TRUE)
